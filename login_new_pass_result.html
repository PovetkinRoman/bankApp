<!DOCTYPE html>
<html lang="en">

<head>
    <title>Корзина товаров</title>
    <script language="JavaScript">
        setInterval(() => {
            var td = document.getElementById('exchange_rates');
            fetch('http://localhost:8080/api/rates')
                .then(response => response.json())
                .then(json => {
                    var table = '<table style="width:100%;margin-left:auto;margin-right:auto;border-radius:2%;padding:10px;background-color:whitesmoke;">';
                    table += '<tr><th colspan="3">Курсы валют по отношению к рублю</th></tr>';
                    table += '<tr><th>Валюта</th><th>Обозначение</th><th>Курс</th></tr>';
                    json.forEach(rate => {
                        table += '<tr>';
                        table += '<td>' + rate.title + '</td>';
                        table += '<td>' + rate.name + '</td>';
                        table += '<td>' + rate.value + '</td>';
                        table += '</tr>';
                    });
                    table += '</table>';
                    td.innerHTML = table;
                })
                .catch(error => td.innerHTML = 'Ошибка при получении данных курсов валют');
        }, 1000);
    </script>
</head>

<body>
<div style="float:right;">
    <span style="margin-right: 10px;">testuser3</span>
    <form action="/logout" method="post" style="display: inline;"><input type="hidden" name="_csrf" value="9qMgaKffO35-r_LKhaVKJwd-fmGhzUXy2l3ti500pPCrZ1FUxcUZWJC6WkpTysOp44h-ETIbUwCS9Sbfu27Zs68Ck5TJVWhs"/>
        <button type="submit" style="background: none; border: none; color: blue; text-decoration: underline; cursor: pointer;">
            <b>ВЫЙТИ &cudarrr;</b>
        </button>
    </form>
</div>
<br>
<table style="width:70%;margin-left:auto;margin-right:auto;">
    <tr><td style="padding:2px;">
        <form method="post" action="/user/testuser3/editPassword"><input type="hidden" name="_csrf" value="9qMgaKffO35-r_LKhaVKJwd-fmGhzUXy2l3ti500pPCrZ1FUxcUZWJC6WkpTysOp44h-ETIbUwCS9Sbfu27Zs68Ck5TJVWhs"/>
        <table style="width:100%;margin-left:auto;margin-right:auto;border-radius:2%;padding:10px;background-color:whitesmoke;">
            <tr>
                <td style="font-weight:bold;">Логин</td>
                <td colspan="2">testuser3</td>
            </tr>
            <tr>
                <td style="font-weight:bold;">Изменить пароль</td>
                <td>
                    
                    
                    <p>
                        Пароль: <input name="password" type="password" required/>
                    </p>
                    <p>
                        Повторите пароль: <input name="confirm_password" type="password" required/>
                    </p>
                </td>
                <td style="text-align:right">
                    <button>Изменить пароль</button>
                </td>
            </tr>
        </table>
        </form>
    </td>
    <tr><td style="padding:2px;">
        <form method="post" action="/user/testuser3/editUserAccounts"><input type="hidden" name="_csrf" value="9qMgaKffO35-r_LKhaVKJwd-fmGhzUXy2l3ti500pPCrZ1FUxcUZWJC6WkpTysOp44h-ETIbUwCS9Sbfu27Zs68Ck5TJVWhs"/>
        <table style="width:100%;margin-left:auto;margin-right:auto;border-radius:2%;padding:10px;background-color:whitesmoke;">
            
            <tr>
                <td style="font-weight:bold;">Фамилия Имя</td>
                <td>Test User3</td>
                <td>
                    <input name="name" type="text" style="width:100%"/>
                </td>
            </tr>
            <tr>
                <td style="font-weight:bold;">Дата рождения</td>
                <td>1990-01-01</td>
                <td>
                    <input name="birthdate" type="date" style="width:100%"/>
                </td>
            </tr>
            
            <tr>
                <td style="text-align:right" colspan="3">
                    <button>Сохранить изменения</button>
                </td>
            </tr>
        </table>
        </form>
    </td></tr>
    <tr><td style="padding:2px;">
        <form method="post" action="/user/testuser3/cash"><input type="hidden" name="_csrf" value="9qMgaKffO35-r_LKhaVKJwd-fmGhzUXy2l3ti500pPCrZ1FUxcUZWJC6WkpTysOp44h-ETIbUwCS9Sbfu27Zs68Ck5TJVWhs"/>
            <table style="width:100%;margin-left:auto;margin-right:auto;border-radius:2%;padding:10px;background-color:whitesmoke;">
                
                <tr>
                    <td style="font-weight:bold;">Наличные</td>
                    <td>
                        Валюта
                        <select name="currency">
                            
                        </select>
                    </td>
                    <td>
                        <input name="value" type="number" style="width:100%" required/>
                    </td>
                    <td>
                    <td style="text-align:right">
                        <button name="action" value="PUT">Положить</button>
                        <button name="action" value="GET">Снять</button>
                    </td>
                </tr>
            </table>
        </form>
    </td></tr>
    <tr><td style="padding:2px;">
        <form method="post" action="/user/testuser3/transfer"><input type="hidden" name="_csrf" value="9qMgaKffO35-r_LKhaVKJwd-fmGhzUXy2l3ti500pPCrZ1FUxcUZWJC6WkpTysOp44h-ETIbUwCS9Sbfu27Zs68Ck5TJVWhs"/>
            <table style="width:100%;margin-left:auto;margin-right:auto;border-radius:2%;padding:10px;background-color:whitesmoke;">
                
                <tr>
                    <td style="font-weight:bold;">Перевод себе</td>
                    <td>
                        Со счета
                        <select name="from_currency">
                            
                        </select>
                    </td>
                    <td>
                        На счет
                        <select name="to_currency">
                            
                        </select>
                    </td>
                    <td>
                        <input name="value" type="number" style="width:100%" required/>
                    </td>
                    <td style="text-align:right">
                        <input hidden name="to_login" value="testuser3"/>
                        <button>Перевести</button>
                    </td>
                </tr>
            </table>
        </form>
    </td></tr>
    <tr><td style="padding:2px;">
        <form method="post" action="/user/testuser3/transfer"><input type="hidden" name="_csrf" value="9qMgaKffO35-r_LKhaVKJwd-fmGhzUXy2l3ti500pPCrZ1FUxcUZWJC6WkpTysOp44h-ETIbUwCS9Sbfu27Zs68Ck5TJVWhs"/>
            <table style="width:100%;margin-left:auto;margin-right:auto;border-radius:2%;padding:10px;background-color:whitesmoke;">
                
                <tr>
                    <td style="font-weight:bold;">Перевод другому</td>
                    <td>
                        Со счета
                        <select name="from_currency">
                            
                        </select>
                    </td>
                    <td>
                        На счет
                        <select name="to_currency">
                            
                        </select>
                    </td>
                    <td>
                        <input name="value" type="number" required/>
                    </td>
                    <td>
                        Кому
                        <select name="to_login">
                            
                        </select>
                    </td>
                    <td style="text-align:right">
                        <button>Перевести</button>
                    </td>
                </tr>
            </table>
        </form>
    </td></tr>
    <tr><td style="padding:2px;" id="exchange_rates">
    </td></tr>
</table>
</body>

</html>
