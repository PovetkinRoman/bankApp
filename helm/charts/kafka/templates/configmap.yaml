apiVersion: v1
kind: ConfigMap
metadata:
  name: kafka-config
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "kafka.labels" . | nindent 4 }}
data:
  # Kafka configuration
  broker.id: "{{ .Values.kafka.config.brokerId }}"
  zookeeper.connect: "{{ .Values.kafka.config.zookeeperConnect }}"
  listeners: "{{ .Values.kafka.config.listeners }}"
  advertised.listeners: "{{ .Values.kafka.config.advertisedListeners }}"
  num.partitions: "{{ .Values.kafka.config.numPartitions }}"
  default.replication.factor: "{{ .Values.kafka.config.defaultReplicationFactor }}"
  min.insync.replicas: "{{ .Values.kafka.config.minInsyncReplicas }}"
  log.retention.hours: "{{ .Values.kafka.config.logRetentionHours }}"
  log.retention.bytes: "{{ .Values.kafka.config.logRetentionBytes }}"
  log.segment.bytes: "{{ .Values.kafka.config.logSegmentBytes }}"
  
  # Topics configuration
  topics.yaml: |
    {{- toYaml .Values.topics | nindent 4 }}
